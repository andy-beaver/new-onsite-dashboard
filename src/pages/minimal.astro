---
// src/pages/minimal.astro
import Layout from '../layouts/Layout.astro';
import type { OnsiteData } from '../types';

// Import JSON data with type assertion
import onsiteDataImport from '../data/onsiteData.json';
const onsiteData = onsiteDataImport as unknown as OnsiteData;

// Calculate key metrics
const currentDate = new Date();
const currentMonthIndex = currentDate.getMonth();
const currentMonth = onsiteData.months[currentMonthIndex];

// Format date
const options: Intl.DateTimeFormatOptions = { 
  weekday: 'long', 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric' 
};
const formattedDate = currentDate.toLocaleDateString('en-US', options);

// Get last recorded day (just using current date for demo)
const lastRecordedDay = formattedDate;

// Calculate completion percentage
const completionPercentage = parseFloat(currentMonth.perc_complete);
---

<Layout>
  <div class="flex flex-col items-center justify-center min-h-screen p-6 bg-white dark:bg-black text-center">
    <!-- Top stats section - 3 big numbers -->
    <div class="w-full max-w-4xl grid grid-cols-3 gap-8 mb-16">
      <div class="flex flex-col items-center">
        <span class="text-9xl font-bold text-black dark:text-white">{currentMonth.req_onsite}</span>
        <span class="text-xl text-gray-700 dark:text-gray-300">Required Onsite Days</span>
      </div>
      
      <div class="flex flex-col items-center">
        <span class="text-9xl font-bold text-black dark:text-white">{currentMonth.badge_count}</span>
        <span class="text-xl text-gray-700 dark:text-gray-300">Days Onsite</span>
      </div>
      
      <div class="flex flex-col items-center">
        <span class="text-9xl font-bold text-black dark:text-white">{currentMonth.req_onsite - currentMonth.badge_count}</span>
        <span class="text-xl text-gray-700 dark:text-gray-300">Onsite Days Remaining</span>
      </div>
    </div>
    
    <!-- Current date section -->
    <div class="mb-16">
      <h2 class="text-6xl font-bold text-black dark:text-white">{formattedDate}</h2>
      <p class="text-xl text-gray-700 dark:text-gray-300 mt-2">Last Recorded Day</p>
    </div>
    
    <!-- Completion percentage -->
    <div class="mb-16">
      <h2 class="text-9xl font-bold text-yellow-400">{completionPercentage}%</h2>
      <p class="text-xl text-gray-700 dark:text-gray-300 mt-2">Month Completed</p>
    </div>
    
    <!-- Back to dashboard link -->
    <div class="mt-8">
      <a href="/" class="text-lg text-blue-600 dark:text-blue-400 hover:underline">
        Back to Dashboard
      </a>
    </div>
  </div>
</Layout>